# 浮点精度

## 十进制与二进制的转换

### 整数

除 2 取余，再取商除 2 取余，直至商为 0；余数从低位排到高位。

示例：
```
5 = 0b101
5 / 2 = 2 - 1
2 / 2 = 1 - 0
1 / 2 = 0 - 1

6 = 0b110
6 / 2 = 3 - 0
3 / 2 = 1 - 1
1 / 2 = 0 - 1
```

### 小数部分

取用乘 2 取整的方式，取整数位；再继续重复，直到小数部分为 0；

示例：
```
0.5 = 0.1
0.5 * 2 = 1.0

0.6 = 0.(1001)
0.6 * 2 = 1.2
0.2 * 2 = 0.4
0.4 * 2 = 0.8
0.8 * 2 = 1.6

0.6 * 2 = 1.2
...

0.2 = 0.(0011)
0.2 * 2 = 0.4
0.4 * 2 = 0.8
0.8 * 2 = 1.6
0.6 * 2 = 1.2

0.2 * 2 = 0.4
...
```

## 浮点精度问题

举例：商品原价 100，打 8.8 折。
```
100 * (8.8 / 10)
= 8.799999999999999
```

某些特定数据做四则运算：

```
0.1 + 0.2
= 0.30000000000000004

0.3 - 0.1
= 0.19999999999999998

```

## 处理浮点精度的方法

1. BigDecimal